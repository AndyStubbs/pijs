/**
 * Pi.js - Graphics and Sound Library
 * @version 2.0.0-alpha.1
 * @author Andy Stubbs
 * @license Apache-2.0
 * @preserve
 */
var g=Object.defineProperty;var O=Object.getOwnPropertyDescriptor;var R=Object.getOwnPropertyNames;var N=Object.prototype.hasOwnProperty;var P=(e,t)=>{for(var n in t)g(e,n,{get:t[n],enumerable:!0})},D=(e,t,n,r)=>{if(t&&typeof t=="object"||typeof t=="function")for(let o of R(t))!N.call(e,o)&&o!==n&&g(e,o,{get:()=>t[o],enumerable:!(r=O(t,o))||r.enumerable});return e};var $=e=>D(g({},"__esModule",{value:!0}),e);var ue={};P(ue,{default:()=>ae,pi:()=>l});module.exports=$(ue);var s={nextScreenId:0,screens:{},activeScreen:null,images:{},imageCount:0,defaultPrompt:"\xDB",defaultFont:{},nextFontId:0,fonts:{},defaultPalette:[],defaultColor:7,commands:{},screenCommands:{},defaultPenDraw:null,pens:{},penList:[],blendCommands:{},blendCommandsList:[],defaultBlendCmd:null,settings:{},settingsList:[],volume:.75,isTouchScreen:!1,defaultInputFocus:typeof window<"u"?window:null},y=[];var p={};P(p,{binarySearch:()=>ne,cToHex:()=>d,canAddEventListeners:()=>H,checkColor:()=>_,clamp:()=>b,colorStringToColor:()=>C,colorStringToHex:()=>k,compareColors:()=>q,convertToArray:()=>Z,convertToColor:()=>U,copyProperties:()=>Y,dataToHex:()=>V,degreesToRadian:()=>J,deleteProperties:()=>ee,getInt:()=>re,getWindowSize:()=>te,hexToColor:()=>x,hexToData:()=>z,inRange:()=>j,inRange2:()=>B,isArray:()=>h,isDomElement:()=>M,isFunction:()=>F,isInteger:()=>u,math:()=>oe,pad:()=>X,padL:()=>E,padR:()=>Q,queueMicrotask:()=>ie,radiansToDegrees:()=>K,rgbToColor:()=>f,rgbToHex:()=>S,rndRange:()=>G});var F=e=>typeof e=="function",M=e=>e instanceof Element,h=Array.isArray,u=Number.isInteger,H=e=>typeof e.addEventListener=="function"&&typeof e.removeEventListener=="function";function x(e){let t,n,r,o,i;return i=e,e.length===4?(t=parseInt(e.slice(1,2),16)*16-1,n=parseInt(e.slice(2,3),16)*16-1,r=parseInt(e.slice(3,4),16)*16-1):(t=parseInt(e.slice(1,3),16),n=parseInt(e.slice(3,5),16),r=parseInt(e.slice(5,7),16)),e.length===9?(i=e.slice(0,7),o=parseInt(e.slice(7,9),16)):o=255,{r:t,g:n,b:r,a:o,s:`rgba(${t},${n},${r},${Math.round(o/255*1e3)/1e3})`,s2:i}}function d(e){u(e)||(e=Math.round(e)),e=b(e,0,255);let t=Number(e).toString(16);return t.length<2?"0"+t:t.toUpperCase()}function S(e,t,n,r){return isNaN(r)&&(r=255),"#"+d(e)+d(t)+d(n)+d(r)}function f(e,t,n,r){return x(S(e,t,n,r))}function C(e){let n=document.createElement("canvas").getContext("2d",{willReadFrequently:!0});n.fillStyle=e,n.fillRect(0,0,1,1);let r=n.getImageData(0,0,1,1).data;return f(r[0],r[1],r[2],r[3])}function k(e){return C(e).s2}function W(e){e=e.slice(e.indexOf("(")+1,e.indexOf(")"));let t=e.split(","),n=[];for(let r=0;r<t.length;r++){let o;r===3?o=parseFloat(t[r].trim())*255:o=parseInt(t[r].trim()),n.push(o)}return n}function U(e){if(e===void 0)return null;if(h(e)&&e.length>2)return f(e[0],e[1],e[2],e[3]);if(u(e?.r)&&u(e?.g)&&u(e?.b))return f(e.r,e.g,e.b,e.a);if(typeof e!="string")return null;if(/(^#[0-9A-F]{8}$)|(^#[0-9A-F]{6}$)|(^#[0-9A-F]{3}$)/i.test(e))return x(e);if(e.indexOf("rgb")===0){let n=W(e);return n.length<3?null:f(n[0],n[1],n[2],n[3])}return C(e)}function _(e){let t=new Option().style;return t.color=e,t.color!==""}function q(e,t){return e.r===t.r&&e.g===t.g&&e.b===t.b&&e.a===t.a}function z(e,t,n){e=e.toUpperCase();let r=[],o=0,i="",a=0;for(let c=0;c<n;c++){r.push([]);for(let w=0;w<t;w++){if(a>=i.length){let m=parseInt(e[o],16);isNaN(m)&&(m=0),i=E(m.toString(2),4,"0"),o+=1,a=0}r[c].push(parseInt(i[a])),a+=1}}return r}function V(e){let t="",n="";for(let r=0;r<e.length;r++)for(let o=0;o<e[r].length;o++)n+=e[r][o],n.length===4&&(t+=parseInt(n,2).toString(16),n="");return t}function b(e,t,n){return Math.min(Math.max(e,t),n)}function j(e,t){return e.x>=t.x&&e.x<t.x+t.width&&e.y>=t.y&&e.y<t.y+t.height}function B(e,t,n,r,o,i){return e>=n&&e<n+o&&t>=r&&t<r+i}function G(e,t){return Math.random()*(t-e)+e}function J(e){return e*(Math.PI/180)}function K(e){return e*(180/Math.PI)}function E(e,t,n){typeof n!="string"&&(n=" ");let r="";e=e+"";for(let o=e.length;o<t;o++)r+=n;return r+e}function Q(e,t,n){typeof n!="string"&&(n=" "),e=e+"";for(let r=e.length;r<t;r++)e+=n;return e}function X(e,t,n){for((typeof n!="string"||n.length===0)&&(n=" "),e=e+"";e.length<t;)e=n+e+n;return e.length>t&&(e=e.substr(0,t)),e}function Y(e,t){for(let n in t)t.hasOwnProperty(n)&&(e[n]=t[n])}function Z(e){let t=[];for(let n in e)e.hasOwnProperty(n)&&t.push(e[n]);return t}function ee(e){for(let t in e)e.hasOwnProperty(t)&&delete e[t]}function te(){let e=window.innerWidth||document.documentElement.clientWidth||document.body.clientWidth,t=window.innerHeight||document.documentElement.clientHeight||document.body.clientHeight;return{width:e,height:t}}function ne(e,t,n){let r=0,o=e.length-1;for(;r<=o;){let i=o+r>>1,a=n(t,e[i],i);if(a>0)r=i+1;else if(a<0)o=i-1;else return i}return-r-1}function re(e,t){return e=parseInt(e),isNaN(e)&&(e=t),e}var oe=Object.freeze({deg30:Math.PI/6,deg45:Math.PI/4,deg60:Math.PI/3,deg90:Math.PI/2,deg120:2*Math.PI/3,deg135:3*Math.PI/4,deg150:5*Math.PI/6,deg180:Math.PI,deg210:7*Math.PI/6,deg225:5*Math.PI/4,deg240:4*Math.PI/3,deg270:3*Math.PI/2,deg300:5*Math.PI/3,deg315:7*Math.PI/4,deg330:11*Math.PI/6,deg360:Math.PI*2}),ie=window.queueMicrotask||(e=>setTimeout(e,0));function I(e,t,n,r,o,i){s.commands[e]=t,n||y.push({name:e,fn:t,isScreen:r,parameters:o||[],isSet:i,noParse:i})}function L(e,t,n,r){I(e,function(o,i){o.pixelMode?t(o,i):n(o,i)},!1,!0,r)}function T(e,t,n,r){s.settings[e]={name:e,fn:t,isScreen:n,parameters:r||[]},s.settingsList.push(e)}function A(e,t,n){s.penList.push(e),s.pens[e]={cmd:t,cap:n}}function v(e,t){s.blendCommandsList.push(e),s.blendCommands[e]=t}var se="2.0.0-alpha.1",l={version:se,_:{data:s,addCommand:I,addCommands:L,addSetting:T,addPen:A,addBlendCommand:v},util:p};typeof window<"u"&&(window.pi=l,window.$===void 0&&(window.$=l));var ae=l;
/**
 * Pi.js - Main Entry Point
 * 
 * Graphics and sound library for retro-style games and demos.
 * Modernized architecture with legacy API compatibility.
 * 
 * @module pi.js
 * @author Andy Stubbs
 * @license Apache-2.0
 */
//# sourceMappingURL=pi.cjs.min.js.map
