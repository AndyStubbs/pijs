<!DOCTYPE html>
<html lang="en">
<head>
	<meta charset="UTF-8">
	<title>Phase 10 - Table Formatting Test</title>
	<style>
		body {
			margin: 20px;
			font-family: monospace;
			background: #222;
			color: #fff;
		}
		h1 {
			color: #4CAF50;
		}
		.status {
			margin: 20px 0;
			padding: 15px;
			background: #333;
			border-radius: 5px;
		}
		canvas {
			border: 2px solid #4CAF50;
			margin: 20px 0;
		}
	</style>
</head>
<body>
	<h1>Phase 10: Table Formatting Test</h1>
	<div class="status" id="status">Loading Pi.js...</div>
	<div id="container"></div>

	<script src="../build/pi.js"></script>
	<script>
		const status = document.getElementById( "status" );

		try {
			// Use $ alias (pi.js loaded as IIFE)
			const $ = window.$ || window.pi;

			if( !$ ) {
				throw new Error( "Pi.js failed to load" );
			}

			status.innerHTML = `
				<div>âœ“ Pi.js v${$.version} loaded</div>
				<div>âœ“ Using unminified build/pi.js for debugging</div>
				<div>Testing table formatting...</div>
			`;

			// Set up a simple palette
			$.setDefaultPal( [
				"#000000", // 0 - black (transparent)
				"#FFFFFF", // 1 - white
				"#FF0000", // 2 - red
				"#00FF00", // 3 - green
				"#0000FF", // 4 - blue
				"#FFFF00", // 5 - yellow
				"#FF00FF", // 6 - magenta
				"#00FFFF"  // 7 - cyan
			] );

			// Create a test screen
			const screen = $.screen( "640x480", "container" );

			status.innerHTML += `<div>âœ“ Screen created: ${screen.width()}x${screen.height()}</div>`;

			// Clear screen
			screen.cls();
			screen.setColor( 1 ); // White

			// Test standard table (auto-sized)
			screen.locate( 0, 0 );
			const table1 = [
				[ "Name", "Age", "City" ],
				[ "Alice", "25", "NYC" ],
				[ "Bob", "30", "LA" ]
			];
			screen.printTable( table1 );
			status.innerHTML += `<div>âœ“ Printed standard table (auto-sized)</div>`;

			// Test table with different border style
			screen.locate( 8, 0 );
			const table2 = [
				[ "Product", "Price", "Stock" ],
				[ "Widget", "$10", "50" ],
				[ "Gadget", "$25", "30" ]
			];
			screen.printTable( table2, null, "double" );
			status.innerHTML += `<div>âœ“ Printed table with double borders</div>`;

			// Test formatted table
			screen.locate( 16, 0 );
			const tableFormat = [
				"*---------*---------*",
				"|    H    |    H    |",
				"*---------*---------*",
				"|         |         |",
				"*---------*---------*"
			];
			const table3 = [ [ "Header 1", "Header 2" ], [ "Data 1", "Data 2" ] ];
			screen.printTable( table3, tableFormat, "single" );
			status.innerHTML += `<div>âœ“ Printed formatted table with custom layout</div>`;

			// Render to canvas
			screen.render();

			status.innerHTML += `
				<div style="color: #4CAF50; font-weight: bold; margin-top: 15px;">
					âœ“ Phase 10 Complete - Table Formatting Working!
				</div>
				<div style="margin-top: 10px;">
					Commands tested:
					<ul>
						<li>screen.printTable(items) - Standard auto-sized table âœ“</li>
						<li>screen.printTable(items, null, borderStyle) - Custom borders âœ“</li>
						<li>screen.printTable(items, format, style) - Formatted table âœ“</li>
						<li>Border styles: single, double, singleDouble, doubleSingle, thick âœ“</li>
						<li>screen.setPos(col, row) - Set cursor by column/row âœ“</li>
						<li>screen.getPos() - Get cursor position âœ“</li>
						<li>screen.getCols() - Get screen width in columns âœ“</li>
						<li>screen.getRows() - Get screen height in rows âœ“</li>
					</ul>
				</div>
				<div style="margin-top: 10px; color: #FFC107;">
					ðŸ“Š ASCII box-drawing table formatting working!<br>
					Multiple border styles and custom table layouts supported.
				</div>
			`;

		} catch( e ) {
			status.innerHTML = `
				<div style="color: #f44336;">âœ— Error: ${e.message}</div>
				<pre style="color: #f44336;">${e.stack}</pre>
			`;
			console.error( e );
		}
	</script>
</body>
</html>

