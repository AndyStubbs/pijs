<!DOCTYPE html>
<html lang="en">
<head>
	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width, initial-scale=1.0">
	<title>Blend Mode Test - Pixel Mode</title>
	<style>
		body {
			margin: 0;
			padding: 20px;
			font-family: monospace;
			background: #222;
			color: #fff;
		}
		h1 {
			color: #4CAF50;
		}
		.info {
			background: #333;
			padding: 15px;
			border-radius: 5px;
			margin: 20px 0;
		}
		.screens {
			display: flex;
			gap: 20px;
			flex-wrap: wrap;
		}
		.screen-container {
			text-align: center;
		}
		canvas {
			display: block;
			margin: 10px 0;
		}
	</style>
</head>
<body>
	<h1>Blend Mode Test - Pixel Mode</h1>
	<div class="info">
		<p><strong>Testing:</strong> Blend modes with filled shapes in pixel mode</p>
		<p><strong>Left:</strong> Normal blend mode (replaces pixels)</p>
		<p><strong>Right:</strong> Alpha blend mode (blends with transparency)</p>
	</div>

	<div class="screens">
		<div class="screen-container">
			<h3>Normal Blend</h3>
			<div id="container1" style="width: 320px; height: 240px;"></div>
		</div>
		<div class="screen-container">
			<h3>Alpha Blend</h3>
			<div id="container2" style="width: 320px; height: 240px;"></div>
		</div>
	</div>

	<script src="../build/pi.js"></script>
	<script>
		const $ = window.$ || window.pi;

		try {
			// Screen 1: Normal blend mode
			const screen1 = $.screen( "320x240", "container1" );
			screen1.setPixelMode( true );
			screen1.setBlendMode( "normal" );
			screen1.cls();
			
			// Draw background circles
			screen1.setColor( 12 );  // Red
			screen1.circle( 120, 120, 60, 12 );
			
			screen1.setColor( 10 );  // Green
			screen1.circle( 200, 120, 60, 10 );
			
			// Draw semi-transparent blue circle on top (using RGBA)
			screen1.setColor( "rgba(0, 0, 255, 128)" );  // Half transparent blue
			screen1.circle( 160, 150, 60, "rgba(0, 0, 255, 128)" );
			
			screen1.setColor( 15 );
			screen1.locate( 0, 0 );
			screen1.print( "Normal: Blue replaces", false );
			screen1.render();

			// Screen 2: Alpha blend mode
			const screen2 = $.screen( "320x240", "container2" );
			screen2.setPixelMode( true );
			screen2.setBlendMode( "blend" );  // Enable alpha blending
			screen2.cls();
			
			// Draw background circles
			screen2.setColor( 12 );  // Red
			screen2.circle( 120, 120, 60, 12 );
			
			screen2.setColor( 10 );  // Green
			screen2.circle( 200, 120, 60, 10 );
			
			// Draw semi-transparent blue circle on top (using RGBA)
			screen2.setColor( "rgba(0, 0, 255, 0.5)" );  // Half transparent blue
			screen2.circle( 160, 150, 60, "rgba(0, 0, 255, 0.5)" );
			
			screen2.setColor( 15 );
			screen2.locate( 0, 0 );
			screen2.print( "Blend: Blue blends", false );
			screen2.render();

			console.log( "âœ… Blend mode test complete!" );
			console.log( "Screen 1 blend mode: normal (direct replacement)" );
			console.log( "Screen 2 blend mode: blend (alpha blending)" );

		} catch( e ) {
			console.error( "Test failed:", e );
			document.body.innerHTML += `<div class="info" style="background: #f44336;"><strong>Error:</strong> ${e.message}</div>`;
			throw e;
		}
	</script>
</body>
</html>

