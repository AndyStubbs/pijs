<!DOCTYPE html>
<html>
	<head>
		<title>Onscreen Keyboard 01</title>
		<script type="text/toml">
			[[TOML_START]]
			file = "onscreen_keyboard_01"
			name = "onscreen keyboard 01 - text keyboard clicks"
			width = 400
			height = 280
			test = "screenshot.js"
			commands = """
				DL 100
				MV 78,70
				MD
				DL 30
				MU
				MV 25,83
				MD
				DL 30
				MU
				MV 154,86
				MD
				DL 30
				MU
				MV 205,51
				MD
				DL 30
				MU
				MV 75,50
				MD
				DL 30
				MU
				MV 190,70
				MD
				DL 30
				MU
				MV 120,70
				MD
				DL 30
				MU
				DL 100
				"""
			[[TOML_END]]
		</script>
		<!-- [Pi.js Script]-->
		<script src="../../../build/pi.js"></script>
		<script src="../../../plugins/print-table/dist/print-table.min.js"></script>
		<script src="../../../plugins/onscreen-keyboard/dist/onscreen-keyboard.min.js"></script>
		<!-- [/Pi.js Script]-->
		<style>
			html, body {
				color: white;
				background-color: gray;
				margin: 0;
			}
		</style>
	</head>
<body>
<script>

$.screen( { "aspect": "400x280" } );
$.setFont( 2 );
$.setColor( 7 );

let buffer = "";
let cnt = $.getCols();

$.print( "Click keyboard keys:" );
$.print( "" );

$.showKeyboard( "text" );
$.render();

setInterval( () => {
	const keys = $.inkey();
	$.cls( 0, 8, 400, 16 );
	if( keys && keys.length > 0 ) {
		for( let key of keys ) {
			if( key.key !== buffer.charAt( buffer.length - 1 ) ) {
				buffer += key.key;
			}
		}
	}
	$.setPos( 0, 1 );
	let start = Math.max( buffer.length - cnt, 0 );
	$.print( buffer.substring( start ), true );
	$.setPos( 0, 5 );
} );

</script>
</body>
</html>


