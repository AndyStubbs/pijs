<!DOCTYPE html>
<html>
	<head>
		<title>Onscreen Keyboard 01</title>
		<script type="text/toml">
			[[TOML_START]]
			file = "onscreen_keyboard_01"
			name = "onscreen keyboard 01 - text keyboard clicks"
			width = 400
			height = 280
			test = "screenshot.js"
			commands = """
				DL 200
				MV 78,70
				MC
				DL 100
				MV 25,83
				MC
				DL 200
				"""
			[[TOML_END]]
		</script>
		<!-- [Pi.js Script]-->
		<script src="../../../build/pi.js"></script>
		<script src="../../../plugins/print-table/dist/print-table.min.js"></script>
		<script src="../../../plugins/onscreen-keyboard/dist/onscreen-keyboard.min.js"></script>
		<!-- [/Pi.js Script]-->
		<style>
			html, body {
				color: white;
				background-color: gray;
				margin: 0;
			}
		</style>
	</head>
<body>
<script>

$.screen( { "aspect": "400x280" } );
$.setFont( 2 );
$.setColor( 7 );

let buffer = "";
let cnt = $.getCols();

$.ready( function() {

	$.print( "Click keyboard keys:" );
	$.print( "" );
	$.showKeyboard( "text" );
	
	setInterval( () => {
		const keys = $.inkey();
		$.cls( 0, 8, 400, 16 );
		if( keys ) {
			for( let key of keys ) {
				buffer += key.key;
			}
			$.setPos( 0, 1 );
			let start = Math.max( buffer.length - cnt, 0 );
			$.print( buffer.substring( start ), true );
		}
		$.setPos( 0, 5 );
	} );

	setInterval( () => {
		console.log( $.inpress() );
	}, 5000 );

} );

</script>
</body>
</html>


