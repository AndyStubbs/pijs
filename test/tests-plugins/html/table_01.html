<!DOCTYPE html>
<html>
	<head>
		<title>Print Table Test</title>
		<script type="text/toml">
			[[TOML_START]]
			file = "table_01"
			name = "table 01"
			width = 1000
			height = 850
			delay = 0
			[[TOML_END]]
		</script>
		<script src="libs/seedrandom.js"></script>
		<!-- [Pi.js Script]-->
		<script src="../../../build/pi.js"></script>
		<script src="../../../plugins/print-table/dist/print-table.min.js"></script>
		<!-- [/Pi.js Script]-->
		<style>
			html, body {
				background-color: #333;
				margin: 0;
				padding: 10px;
			}
			.container {
				display: inline-block;
				vertical-align: top;
				margin: 5px;
				background-color: #555;
				padding: 0;
				width: 300px;
				height: 400px;
				margin-bottom: 8px;
			}
		</style>
	</head>
<body>
	<!-- Screen 1: Auto-formatted border styles -->
	<div class="container" id="screen1"></div>

	<!-- Screen 2: Auto-formatted edge cases -->
	<div class="container" id="screen2"></div>

	<!-- Screen 3: Custom formatted simple -->
	<div class="container" id="screen3"></div>

	<!-- Screen 4: Custom formatted advanced -->
	<div class="container" id="screen4"></div>

	<!-- Screen 5: Custom formatted vertical text -->
	<div class="container" id="screen5"></div>

	<!-- Screen 6: Box return values -->
	<div class="container" id="screen6"></div>

<script>
Math.seedrandom( "constant" );

$.ready( function() {

	// ============================================================================
	// SCREEN 1: AUTO-FORMATTED TABLES - BORDER STYLES
	// ============================================================================

	const s1 = $.screen( {
		"aspect": "300m400",
		"container": document.getElementById( "screen1" )
	} );
	$.setScreen( s1 );
	$.setColor( 2 );
	$.setFont( 1 );
	$.print( "Screen 1: Auto-Formatted Border Styles" );

	var data = [
		[ "One", "Two", "Three" ],
		[ "Four", "Five", "Six" ],
		[ "Seven", "Eight", "Nine" ]
	];

	// Test 1.1: Default (single)
	$.setPos( 0, 2 );
	$.setColor( 2 );
	$.print( "1.1: Default (single)" );
	$.setPos( 0, 3 );
	$.printTable( data, null, null );

	// Test 1.2: Double
	$.setPos( 0, 11 );
	$.setColor( 3 );
	$.print( "1.2: Double" );
	$.setPos( 0, 12 );
	$.printTable( data, null, "double" );

	// Test 1.3: Single-Double
	$.setPos( 0, 20 );
	$.setColor( 4 );
	$.print( "1.3: Single-Double" );
	$.setPos( 0, 21 );
	$.printTable( data, null, "singleDouble" );

	// Test 1.4: Double-Single
	$.setPos( 0, 29 );
	$.setColor( 5 );
	$.print( "1.4: Double-Single" );
	$.setPos( 0, 30 );
	$.printTable( data, null, "doubleSingle" );

	// Test 1.5: Thick
	$.setPos( 0, 38 );
	$.setColor( 6 );
	$.print( "1.5: Thick" );
	$.setPos( 0, 39 );
	$.printTable( data, null, "thick" );

	// ============================================================================
	// SCREEN 2: AUTO-FORMATTED TABLES - EDGE CASES
	// ============================================================================

	const s2 = $.screen( {
		"aspect": "300m400",
		"container": document.getElementById( "screen2" )
	} );
	$.setScreen( s2 );
	$.setColor( 2 );
	$.setFont( 1 );
	$.print( "Screen 2: Auto-Formatted/Custom Formatted" );

	// Test 2.1: Varying column counts
	$.setPos( 0, 2 );
	$.setColor( 7 );
	$.print( "2.1: Varying cols" );
	$.setPos( 0, 3 );
	data = [
		[ "A", "B", "C", "D", "E" ],
		[ "One", "Two" ],
		[ "X", "Y", "Z", "W" ]
	];
	$.printTable( data, null, null );

	// Test 2.2: Long text
	$.setPos( 0, 11 );
	$.setColor( 8 );
	$.print( "2.2: Long text" );
	$.setPos( 0, 12 );
	data = [
		[ "VeryLongTextHere", "Short", "MediumText" ],
		[ "A", "AnotherVeryLongTextString", "B" ]
	];
	$.printTable( data, null, null );

	// Test 2.3: Single row
	$.setPos( 0, 20 );
	$.setColor( 9 );
	$.print( "2.3: Single row" );
	$.setPos( 0, 21 );
	data = [
		[ "Header1", "Header2", "Header3", "Header4" ]
	];
	$.printTable( data, null, null );

	// Test 2.4: Many columns
	$.setPos( 0, 26 );
	$.setColor( 10 );
	$.print( "2.4: Many cols (6)" );
	$.setPos( 0, 27 );
	data = [
		[ "1", "2", "3", "4", "5", "6" ],
		[ "A", "B", "C", "D", "E", "F" ]
	];
	$.printTable( data, null, "double" );

	data = [
		[ "One", "Two", "Three" ],
		[ "Four", "Five", "Six" ]
	];
	var format = [
		"*-------*-------*-------*",
		"|       |       |       |",
		"*-------*-------*-------*",
		"|       |       |       |",
		"*-------*-------*-------*"
	];

	// Test 2.5: Left-aligned
	$.setPos( 0, 33 );
	$.setColor( 2 );
	$.print( "2.5: Custom left" );
	$.setPos( 0, 34 );
	$.printTable( data, format, null, false );

	// Test 2.6: Double border
	$.setPos( 27, 33 );
	$.setColor( 5 );
	$.print( "2.6: Double border" );
	$.setPos( 27, 34 );
	format = [
		"*-------*-------*",
		"|       |       |",
		"*-------*-------*",
		"|       |       |",
		"*-------*-------*"
	];
	data = [
		[ "A", "B" ],
		[ "C", "D" ]
	];
	$.printTable( data, format, "double", false );

	// Test 2.7: Centered
	$.setPos( 0, 40 );
	$.setColor( 3 );
	$.print( "2.7: Custom centered" );
	$.setPos( 0, 41 );
	$.printTable( data, format, null, true );

	// ============================================================================
	// SCREEN 3: CUSTOM FORMATTED TABLES - ADVANCED
	// ============================================================================

	const s3 = $.screen( {
		"aspect": "300m400",
		"container": document.getElementById( "screen3" )
	} );
	$.setScreen( s3 );
	$.setColor( 2 );
	$.setFont( 1 );
	$.print( "Screen 3: Custom Formatted Advanced" );

	// Test 3.1: Thick border
	$.setPos( 0, 2 );
	$.setColor( 6 );
	$.print( "3.1: Thick border" );
	$.setPos( 0, 3 );
	$.printTable( data, format, "thick", false );

	// Test 3.2: Complex layout
	$.setPos( 27, 2 );
	$.setColor( 7 );
	$.print( "3.2: Complex layout" );
	$.setPos( 27, 3 );
	format = [
		"*-----------*---*---*",
		"|           |   |   |",
		"*----*------*---*---*",
		"|    |      |       |",
		"|    *------*       |",
		"*----*              |",
		"|    |              |",
		"*----*--------------*"
	];
	data = [
		[ "Title", "A", "B" ],
		[ "Sub1", "C", "D" ],
		[ "Sub2", "E" ],
		[ "Sub3" ]
	];
	$.printTable( data, format, "singleDouble", false );

	// Test 3.3: Centered double
	$.setPos( 0, 12 );
	$.setColor( 8 );
	$.print( "3.3: Centered double" );
	$.setPos( 0, 13 );
	format = [
		"*-------*-------*-------*",
		"|       |       |       |",
		"*-------*-------*-------*",
		"|       |       |       |",
		"*-------*-------*-------*"
	];
	data = [
		[ "One", "Two", "Three" ],
		[ "Four", "Five", "Six" ]
	];
	$.printTable( data, format, "double", true );

	data = [
		[ "One", "2", "3", "FourSandwhiches", "EggMcMuffins", "6a" ],
		[ "Hotdogs", "Five", "Six", "7", "8", "9" ],
		[ "Seven", "Eight", "Nine", "a", "b", "c" ]
	];
	format = [
		"*-----------*---*---*---*----*",
		"|           |   |   |V  |V   |",
		"*----*------*---*---*   |    |",
		"|    |      |       |   |    |",
		"|    *------*       |   |    |",
		"*----*      |       |   |    |",
		"|    |      |       |   |    |",
		"*----*------*-------*---*----*"
	];
	$.setPos( 0, 19 );
	$.setColor( 4 );
	$.print( "3.4: Vertical Text" );
	$.printTable( data, format, null, false );

	// Test 3.1: Formatted table boxes
	$.setPos( 0, 30 );
	$.setColor( 2 );
	$.print( "3.1: Formatted boxes" );
	$.setPos( 0, 31 );
	format = [
		"*-------*-------*",
		"|       |       |",
		"*-------*-------*",
		"|       |       |",
		"*-------*-------*"
	];
	data = [
		[ "Cell1", "Cell2" ],
		[ "Cell3", "Cell4" ]
	];
	var boxes = $.printTable( data, format, null, false );
	drawBoxes( boxes, 15 );

	// Test 3.2: Auto-table boxes
	$.setPos( 0, 37 );
	$.setColor( 3 );
	$.print( "3.2: Auto boxes" );
	$.setPos( 0, 38 );
	data = [
		[ "A", "B", "C" ],
		[ "D", "E", "F" ]
	];
	boxes = $.printTable( data, null, null );
	drawBoxes( boxes, 20 );

	// ============================================================================
	// SCREEN 4: CUSTOM FORMATTED TABLES - ADVANCED
	// ============================================================================

	const s4 = $.screen( {
		"aspect": "300m400",
		"container": document.getElementById( "screen4" )
	} );
	$.setScreen( s4 );
	$.setColor( 2 );
	$.setFont( 1 );
	$.print( "Screen 4: Edge Cases Part 1" );

	// Test 4.1: Single cell
	$.setPos( 0, 2 );
	$.setColor( 4 );
	$.print( "4.1: Single cell" );
	$.setPos( 0, 3 );
	data = [
		[ "Single" ]
	];
	$.printTable( data, null, "double" );

	// Test 4.2: Empty strings
	$.setPos( 0, 8 );
	$.setColor( 5 );
	$.print( "4.2: Empty strings" );
	$.setPos( 0, 9 );
	data = [
		[ "A", "", "C" ],
		[ "", "B", "" ]
	];
	$.printTable( data, null, null );

	// Test 4.3: Numbers as strings
	$.setPos( 0, 16 );
	$.setColor( 6 );
	$.print( "4.3: Numbers" );
	$.setPos( 0, 17 );
	data = [
		[ "1", "2", "3" ],
		[ "10", "20", "30" ],
		[ "100", "200", "300" ]
	];
	$.printTable( data, null, "singleDouble" );

	// Test 4.4: Very short text
	$.setPos( 0, 25 );
	$.setColor( 7 );
	$.print( "4.4: Short text" );
	$.setPos( 0, 26 );
	data = [
		[ "A", "B" ],
		[ "X", "Y" ]
	];
	$.printTable( data, null, null );

	// Test 4.5: Wide custom format
	$.setColor( 8 );
	$.print();
	$.print( "4.5: Wide format" );
	//$.setPos( 0, 3 );
	format = [
		"*-------------------*-------*",
		"|                   |       |",
		"*-------------------*-------*",
		"|                   |       |",
		"*-------------------*-------*"
	];
	data = [
		[ "LongColumnName", "Short" ],
		[ "AnotherLongName", "XY" ]
	];
	$.printTable( data, format, "doubleSingle", false );

	// ============================================================================
	// SCREEN 5:
	// ============================================================================
	
	// ============================================================================
	// SCREEN 6:
	// ============================================================================

	// ============================================================================
	// HELPER FUNCTION: Draw boxes around table cells
	// ============================================================================

	function drawBoxes( boxes, startColor ) {
		if( !boxes || boxes.length === 0 ) {
			return;
		}

		for( var i = 0; i < boxes.length; i++ ) {
			var box = boxes[ i ];
			var c = ( i % 15 ) + startColor;
			if( c > 15 ) {
				c += 20;
			}
			$.setColor( c );
			$.rect(
				box.pixels.x, box.pixels.y,
				box.pixels.width, box.pixels.height
			);
		}
	}

} );

</script>
</body>
</html>
