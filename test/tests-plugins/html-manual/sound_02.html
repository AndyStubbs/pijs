<!DOCTYPE html>
<html>
	<head>
		<title>Sound 02</title>
		<script type="text/toml">
			[[TOML_START]]
			test = "screenshot.js"
			file = "sound_02"
			name = "sound 02"
			width = 600
			height = 300
			delay = 0
			[[TOML_END]]
		</script>
		<script src="../../../build/pi.js"></script>
		<script src="../../../build/plugins/play-sound/play-sound.js"></script>
		<script src="../../../build/plugins/keyboard/keyboard.js"></script>
		<style>
			html, body {
				color: white;
				background-color: blue;
				margin: 10px;
			}
			pre {
				width: 100%;
				color: white;
				font-size: 14px;
			}
			textarea {
				width: 800px;
				height: 300px;
			}
		</style>
	</head>
<body>

<script>

var sound1, sound2;
var step = 1;
sound1 = $.loadAudio( "../../media/RECRUITS.WAV", 3 );
sound2 = $.loadAudio( "../../media/TEST.WAV", 3 );

//sound = $.loadSound( "../../media/star.wav", 6 );
$.ready( function () {
	$.screen( "600x300" );
	$.print(
		"1. Two sounds will play. They will " +
		"stop after 2.5 seconds."
	);
	$.print(
		"2. Two sounds will play but be only the " +
		" first will stop after 2.5 seconds."
	);
	$.print( "3. Any subsequent steps will play the first sound audio." );
	$.print( "Press any key to start." );
	$.onkey( "any", "down", start );
} );
function start() {
	if( step === 1 ) {
		$.print( "Step 1 - 2 songs playing" );
		$.playAudio( sound1, 0.25, 3.5, 4.5 );
		setTimeout( function () {
			$.playAudio( sound2, 0.5, 0 );
		}, 500 );
		setTimeout( function () {
			$.stopAudio();
			step = 2;
			$.print( "Step 1 - 2 songs stopped" );
		}, 2500 );
	} else if( step === 2 ) {
		$.print( "Step 2 - 2 songs playing" );
		$.playAudio( sound1, 0.25, 3.5, 4.5 );
		setTimeout( function () {
			$.playAudio( sound2, 0.5, 0 );
		}, 500 );
		setTimeout( function () {
			$.stopAudio( sound1 );
			step = 3;
			$.print( "Step 2 - 1 song stopped" );
		}, 2500 );
	} else {
		$.playAudio( sound1, 0.25, 3.5, 4.5 );
		$.print( "Sound Started" );
	}
}

</script>

</body>
</html>
