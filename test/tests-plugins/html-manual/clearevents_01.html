<!DOCTYPE html>
<html>
<head>
	<title>clearEvents Test 1</title>
	<meta charset="utf-8">
	<style>
		body {
			font-family: Arial, sans-serif;
			padding: 20px;
			background: #222;
			color: #fff;
		}
		button {
			margin: 10px;
			padding: 10px 20px;
			font-size: 16px;
			cursor: pointer;
		}
		.section {
			margin-bottom: 30px;
			padding: 20px;
			background: #333;
			border-radius: 5px;
		}
		#log {
			background: #111;
			padding: 15px;
			border-radius: 5px;
			min-height: 200px;
			font-family: monospace;
			height: 370px;
			max-height: 370px;
			overflow-y: auto;
		}
		.log-entry {
			margin: 5px 0;
			padding: 5px;
			border-left: 3px solid #4CAF50;
			padding-left: 10px;
		}
		.log-clear {
			border-left-color: #f44336;
		}
		#canvas-container {
			width: 640px;
			height: 400px;
			border: 2px solid #666;
			position: relative;
		}
		#canvas-log-wrapper {
			display: flex;
			gap: 20px;
			margin-bottom: 30px;
		}
		#log-section {
			flex: 1;
			min-width: 300px;
		}
		#log-header {
			display: flex;
			justify-content: space-between;
			align-items: center;
			margin-bottom: 10px;
		}
		#log-header h2 {
			margin: 0;
		}
	</style>
</head>
<body>
	<h1>clearEvents() Test</h1>

	<div class="section" id="canvas-log-wrapper">
		<div>
			<h2>Test Canvas</h2>
			<div id="canvas-container"></div>
		</div>
		<div id="log-section">
			<div id="log-header">
				<h2>Event Log</h2>
				<button onclick="clearLog()">Clear Log</button>
			</div>
			<div id="log"></div>
		</div>
	</div>

	<div class="section">
		<h2>Setup Event Handlers</h2>
		<button onclick="setupKeyboard()">Add Keyboard Handler (press any key)</button>
		<button onclick="setupMouse()">Add Mouse Handler (move mouse over canvas)</button>
		<button onclick="setupTouch()">Add Touch Handler (touch canvas)</button>
		<button onclick="setupPress()">Add Press Handler (click canvas)</button>
		<button onclick="setupClick()">Add Click Handler (click canvas)</button>
		<button onclick="setupAll()">Add All Handlers</button>
	</div>

	<div class="section">
		<h2>Clear Specific Events</h2>
		<button onclick="clearKeyboard()">Clear Keyboard</button>
		<button onclick="clearMouse()">Clear Mouse</button>
		<button onclick="clearTouch()">Clear Touch</button>
		<button onclick="clearPress()">Clear Press</button>
		<button onclick="clearClick()">Clear Click</button>
		<button onclick="clearMultiple()">Clear Mouse + Touch</button>
	</div>

	<div class="section">
		<h2>Clear All Events</h2>
		<button onclick="clearAll()">Clear ALL Event Handlers</button>
	</div>

	<script src="../../../build/pi.js"></script>
	<script src="../../../plugins/pointer/dist/pointer.js"></script>
	<script src="../../../plugins/keyboard/dist/keyboard.js"></script>
	<script>
		// Create a screen for testing in the container
		$.screen( { "aspect": "320x200", "container": "canvas-container" } );
		$.setBgColor( "#1a1a1a" );
		$.cls();
		
		// Center text
		$.setPos( 9, 5 );
		$.setColor( 15 );
		$.print( "Test Canvas - Interact Here" );

		function log( message, isClear = false ) {
			const logDiv = document.getElementById( "log" );
			const entry = document.createElement( "div" );
			entry.className = isClear ? "log-entry log-clear" : "log-entry";
			entry.textContent = new Date().toLocaleTimeString() + " - " + message;
			logDiv.appendChild( entry );
			logDiv.scrollTop = logDiv.scrollHeight;
		}

		function setupKeyboard() {
			$.onkey( "any", "down", ( data ) => {
				log( `Keyboard: Key "${data.key}" pressed` );
			} );
			log( "✓ Keyboard handler added" );
		}

		function setupMouse() {
			$.onmouse( "move", ( data ) => {
				log( `Mouse: Moved to (${data.x}, ${data.y})` );
			} );
			log( "✓ Mouse handler added" );
		}

		function setupTouch() {
			$.ontouch( "start", ( data ) => {
				log( `Touch: Touch started at (${data[0].x}, ${data[0].y})` );
			} );
			log( "✓ Touch handler added" );
		}

		function setupPress() {
			$.onpress( "down", ( data ) => {
				log( `Press: Press down at (${data.x}, ${data.y})` );
			} );
			log( "✓ Press handler added" );
		}

		function setupClick() {
			$.onclick( ( data ) => {
				log( `Click: Clicked at (${data.x}, ${data.y})` );
			} );
			log( "✓ Click handler added" );
		}

		function setupAll() {
			setupKeyboard();
			setupMouse();
			setupTouch();
			setupPress();
			setupClick();
		}

		function clearKeyboard() {
			$.clearEvents( "keyboard" );
			log( "✗ Keyboard handlers cleared", true );
		}

		function clearMouse() {
			$.clearEvents( "mouse" );
			log( "✗ Mouse handlers cleared", true );
		}

		function clearTouch() {
			$.clearEvents( "touch" );
			log( "✗ Touch handlers cleared", true );
		}

		function clearPress() {
			$.clearEvents( "press" );
			log( "✗ Press handlers cleared", true );
		}

		function clearClick() {
			$.clearEvents( "click" );
			log( "✗ Click handlers cleared", true );
		}

		function clearMultiple() {
			$.clearEvents( [ "mouse", "touch" ] );
			log( "✗ Mouse + Touch handlers cleared", true );
		}

		function clearAll() {
			$.clearEvents();
			log( "✗ ALL handlers cleared", true );
		}

		function clearLog() {
			document.getElementById( "log" ).innerHTML = "";
		}

		// Initial message
		log( "Ready! Add event handlers and test clearing them." );
	</script>
</body>
</html>

