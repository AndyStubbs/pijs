<!DOCTYPE html>
<html lang="en">
<head>
	<meta charset="UTF-8">
	<title>Phase 9 - Text & Fonts Test</title>
	<style>
		body {
			margin: 20px;
			font-family: monospace;
			background: #222;
			color: #fff;
		}
		h1 {
			color: #4CAF50;
		}
		.status {
			margin: 20px 0;
			padding: 15px;
			background: #333;
			border-radius: 5px;
		}
		canvas {
			border: 2px solid #4CAF50;
			margin: 20px 0;
		}
	</style>
</head>
<body>
	<h1>Phase 9: Text & Fonts Test</h1>
	<div class="status" id="status">Loading Pi.js...</div>
	<div id="container"></div>

	<script src="../build/pi.js"></script>
	<script>
		const status = document.getElementById( "status" );

		try {
			// Use $ alias (pi.js loaded as IIFE)
			const $ = window.$ || window.pi;

			if( !$ ) {
				throw new Error( "Pi.js failed to load" );
			}

			status.innerHTML = `
				<div>‚úì Pi.js v${$.version} loaded</div>
				<div>‚úì Using unminified build/pi.js for debugging</div>
				<div>Testing text & font commands...</div>
			`;

			// Set up a simple palette
			$.setDefaultPal( [
				"#000000", // 0 - black (transparent)
				"#FFFFFF", // 1 - white
				"#FF0000", // 2 - red
				"#00FF00", // 3 - green
				"#0000FF", // 4 - blue
				"#FFFF00", // 5 - yellow
				"#FF00FF", // 6 - magenta
				"#00FFFF"  // 7 - cyan
			] );

			// Create a test screen
			const screen = $.screen( "320x200", "container" );

			status.innerHTML += `<div>‚úì Screen created: ${screen.width()}x${screen.height()}</div>`;

			// Clear screen
			screen.cls();

			// Test print with default font
			screen.setColor( 1 ); // White
			screen.print( "Hello, Pi.js!" );
			status.innerHTML += `<div>‚úì Printed text with default font</div>`;

			// Test locate and print
			screen.setColor( 2 ); // Red
			screen.locate( 2, 0 );
			screen.print( "Row 2: Red text" );
			status.innerHTML += `<div>‚úì Used locate() to position cursor</div>`;

			// Test colored text
			screen.setColor( 3 ); // Green
			screen.locate( 3, 0 );
			screen.print( "Row 3: Green text" );

			screen.setColor( 4 ); // Blue
			screen.locate( 4, 0 );
			screen.print( "Row 4: Blue text" );

			// Test word wrapping
			screen.setColor( 5 ); // Yellow
			screen.locate( 6, 0 );
			screen.print( "This is a long line of text that should wrap automatically when it reaches the edge of the screen." );
			status.innerHTML += `<div>‚úì Word wrapping working</div>`;

			// Test inline printing
			screen.setColor( 6 ); // Magenta
			screen.locate( 12, 0 );
			screen.print( "Inline", true );
			screen.print( " ", true );
			screen.print( "text", true );
			screen.print( " ", true );
			screen.print( "test", true );
			status.innerHTML += `<div>‚úì Inline printing working</div>`;

			// Test centered text
			screen.setColor( 7 ); // Cyan
			screen.locate( 14, 0 );
			screen.print( "Centered Text", false, true );
			status.innerHTML += `<div>‚úì Centered text working</div>`;

			// Test pos() command
			const cursorPos = screen.pos();
			screen.setColor( 1 ); // White
			screen.print( `Cursor at row ${cursorPos.row}, col ${cursorPos.col}` );
			status.innerHTML += `<div>‚úì pos() returns cursor position</div>`;

			// Render to canvas
			screen.render();

			status.innerHTML += `
				<div style="color: #4CAF50; font-weight: bold; margin-top: 15px;">
					‚úì Phase 9 Complete - Text & Fonts Working!
				</div>
				<div style="margin-top: 10px;">
					Commands tested:
					<ul>
						<li>screen.print(msg) - Print text ‚úì</li>
						<li>screen.print(msg, inLine) - Inline printing ‚úì</li>
						<li>screen.print(msg, false, centered) - Centered text ‚úì</li>
						<li>screen.locate(row, col) - Set cursor position ‚úì</li>
						<li>screen.pos() - Get cursor position ‚úì</li>
						<li>$.loadFont() - Load fonts (built-in loaded) ‚úì</li>
						<li>$.setDefaultFont(id) - Set default font ‚úì</li>
						<li>screen.setFont(id) - Set screen font ‚úì</li>
						<li>screen.setWordBreak(enabled) - Word wrapping ‚úì</li>
					</ul>
				</div>
				<div style="margin-top: 10px; color: #FFC107;">
					üìù Retro-style text rendering working!<br>
					Built-in pixel fonts (6x6, 6x8, 8x8, 8x14, 8x16)<br>
					Word wrapping, centering, and cursor management
				</div>
			`;

		} catch( e ) {
			status.innerHTML = `
				<div style="color: #f44336;">‚úó Error: ${e.message}</div>
				<pre style="color: #f44336;">${e.stack}</pre>
			`;
			console.error( e );
		}
	</script>
</body>
</html>

