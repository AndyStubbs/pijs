<!DOCTYPE html>
<html>
	<head>
		<title>Print Comprehensive</title>
		<script type="text/toml">
			[[TOML_START]]
			file = "print_comprehensive"
			name = "print comprehensive"
			width = 660
			height = 510
			delay = 0
			[[TOML_END]]
		</script>
		<script src="../../../build/pi.js"></script>
		<style>
			html, body {
				background-color: grey;
				margin: 0;
				padding: 0;
			}
			.container {
				display: flex;
				flex-wrap: wrap;
				gap: 10px;
				padding: 10px;
			}
			.screen {
				border: 2px solid #333;
				background-color: #000;
			}
		</style>
	</head>
<body>
	<div class="container">
		<!-- Screen 1: Built-in Fonts -->
		<div id="screen1" class="screen" style="width: 200px; height: 150px;"></div>
		
		<!-- Screen 2: Bitmap Fonts -->
		<div id="screen2" class="screen" style="width: 200px; height: 150px;"></div>
		
		<!-- Screen 3: Cursor Positioning -->
		<div id="screen3" class="screen" style="width: 200px; height: 150px;"></div>
		
		<!-- Screen 4: Word Wrapping -->
		<div id="screen4" class="screen" style="width: 200px; height: 150px;"></div>
		
		<!-- Screen 5: Vertical Scrolling -->
		<div id="screen5" class="screen" style="width: 200px; height: 150px;"></div>
		
		<!-- Screen 6: Custom Characters -->
		<div id="screen6" class="screen" style="width: 200px; height: 150px;"></div>
		
		<!-- Screen 7: Font Size Changes -->
		<div id="screen7" class="screen" style="width: 200px; height: 150px;"></div>

		<!-- Screen 8: Font Colors -->
		<div id="screen8" class="screen" style="width: 200px; height: 150px;"></div>

		<!-- Screen 9: Font Padding -->
		<div id="screen9" class="screen" style="width: 200px; height: 150px;"></div>
	</div>
	
	<!-- Font Images -->
	<img src="../../media/font-6x8-1.webp" id="font-image" style="display: none;"></img>
	
<script>

	// Load margin font
	const marginFont = $.loadFont( document.getElementById( "font-image" ), 6, 8, 1 );

	// gnsh font
	const charset = " ~\"#$%&'()*+,-./0123456789:;<=>?@ABCDEFGHIJKLMNOPQRSTUVWXYZ[\\]^_`" +
		"abcdefghijklmnopqrstuvwxyz{|}~";
	const gnshFont = $.loadFont( "../../media/gnsh-bitmapfont-colour2.png", 5, 12, 0, charset );
	
	// Load block font
	const fontBlock = $.loadFont( "../../media/font-block.png", 10, 10, null, "ABCDFGHI" );

	// Wait for fonts to load
	$.ready( function() {
		
		// ============================================================
		// Screen 1: Built-in Fonts (6x6, 6x8, 8x8, 8x14, 8x16)
		// ============================================================
		$.screen( "200x150", "screen1" );
		$.setColor( 15 );
		$.setPosPx( 5, 5 );
		$.print( "1: BUILT-IN FONTS" );
		
		// Test all built-in fonts
		const fonts = [
			{ id: 0, name: "6x6" },
			{ id: 1, name: "6x8" },
			{ id: 2, name: "8x8" },
			{ id: 3, name: "8x14" },
			{ id: 4, name: "8x16" }
		];
		
		let y = 20;
		for( const font of fonts ) {
			$.setFont( font.id );
			$.setPosPx( 5, y );
			$.print( font.name + ": ABC 123" );
			y += 15;
		}
		
		// ============================================================
		// Screen 2: Loaded Fonts (loaded from images)
		// ============================================================
		$.screen( "200x150", "screen2" );
		$.setColor( 15 );
		$.setPosPx( 5, 5 );
		$.print( "2: LOADED FONTS" );
		$.print();

		// 6x8 font with a margin of 1
		$.setFont( marginFont );
		$.print( "Margin Font" );
		$.print( "ABC 123 !@#" );
		$.print( "The quick brown fox\n" );

		$.setFont( gnshFont );
		$.print( "Custom Font" );
		$.print( "ABC 123 !@#" );
		$.print( "The quick brown fox jumped over the lazy dogs." );

		$.setFont( 1 );
		$.print();
		$.print( "Block Font" );
		$.setFont( fontBlock );
		$.print( "ABCDFGHI" );
		
		// ============================================================
		// Screen 3: Cursor Positioning
		// ============================================================
		$.screen( "200x150", "screen3" );
		$.setColor( 15 );
		$.setPosPx( 5, 5 );
		$.print( "3: CURSOR POSITION" );
		
		$.setFont( 2 ); // 8x8 font
		
		// Test setPos (row/column)
		$.setPos( 0, 2 );
		$.print( "setPos(0,2)" );
		$.setPos( 5, 3 );
		$.print( "setPos(5,3)" );
		$.setPos( 10, 4 );
		$.print( "setPos(10,4)" );
		
		// Test setPosPx (pixels)
		$.setPosPx( 5, 60 );
		$.print( "setPosPx(5,60)" );
		$.setPosPx( 50, 80 );
		$.print( "setPosPx(50,80)" );
		
		// Test getPos and getPosPx
		$.setPosPx( 5, 100 );
		const pos = $.getPos();
		const posPx = $.getPosPx();
		$.print( `getPos: ${pos.col},${pos.row}` );
		$.setPosPx( 5, 115 );
		$.print( `getPosPx: ${posPx.x},${posPx.y}` );
		
		// ============================================================
		// Screen 4: Word Wrapping
		// ============================================================
		$.screen( "200x150", "screen4" );
		$.setColor( 15 );
		$.setPosPx( 5, 5 );
		$.print( "4: WORD WRAPPING" );
		
		$.setFont( 2 ); // 8x8 font
		$.setWordBreak( true );
		$.setPosPx( 5, 20 );
		$.print(
			"This is a very long line that should wrap to multiple lines when it reaches the " +
			"edge of the screen."
		);
		
		$.setWordBreak( false );
		$.setPosPx( 5, 80 );
		$.print( "This line should not wrap and will be cut off at the edge." );
		
		// ============================================================
		// Screen 5: Vertical Scrolling
		// ============================================================
		$.screen( "200x150", "screen5" );
		$.setColor( 15 );
		$.setPosPx( 5, 5 );
		$.print( "5: VERTICAL SCROLL" );
		
		$.setFont( 2 ); // 8x8 font
		
		// Fill screen to trigger scrolling
		for( let i = 0; i < 25; i++ ) {
			$.print(
				`Line ${i + 1}: This is a test line that should cause vertical scrolling when ` +
				`the screen fills up.`
			);
		}
		
		// ============================================================
		// Screen 6: Custom Characters
		// ============================================================
		$.screen( "200x150", "screen6" );
		$.setColor( 15 );
		$.setPosPx( 5, 5 );
		$.print( "6: CUSTOM CHARS" );
		
		$.setFont( 2 ); // 8x8 font
		
		// Define custom characters: A-E
		$.setChar( 65, "1092ba547cc6fe92" );
		$.setChar( 66, "423c2418187e1818" );
		$.setChar( 67, "7cd67cfec6aafe00" );
		$.setChar( 68, "00183c667e5a42c3" );
		$.setChar( 69, "008199FFDBFFBD18" );
		
		$.setPosPx( 5, 20 );
		$.print( "Custom: ABCDE" );
		$.setPosPx( 5, 35 );
		$.print( "Mixed: A1B2C3D4E5" );
		
		// ============================================================
		// Screen 7: Font Size Changes
		// ============================================================
		$.screen( "200x150", "screen7" );
		$.setColor( 15 );
		$.setPosPx( 5, 5 );
		$.print( "7: FONT SIZES" );
		
		// Load bitmap font for size testing
		$.setFont( 1 );
		
		$.setPosPx( 5, 20 );
		$.print( "ABCDFGHI" );
		
		$.setPrintSize( 2, 2 );
		$.setPosPx( 5, 40 );
		$.print( "ABCDFGHI" );
		
		$.setPrintSize( 4, 3 );
		$.setPosPx( 5, 70 );
		$.print( "ABCDFGHI" );


		// ============================================================
		// Test getCols and getRows
		// ============================================================
		const cols = $.getCols();
		const rows = $.getRows();
		
		$.setPrintSize( 1, 1 );
		$.setPosPx( 5, 120 );
		$.print( `Cols: ${cols}, Rows: ${rows}` );
		
		// ============================================================
		// Test getAvailableFonts
		// ============================================================
		const availableFonts = $.getAvailableFonts();
		$.setPosPx( 5, 135 );
		$.print( `Fonts: ${availableFonts.length}` );


		// ============================================================
		// Screen 8: Loaded Fonts (loaded from images)
		// ============================================================
		$.screen( "200x150", "screen8" );
		$.setFont( 1 );
		$.setColor( 15 );
		$.setPosPx( 5, 5 );
		$.print( "8: Font Colors" );
		$.print();

		// Basic colors
		for( let i = 2; i < 5; i += 1 ) {
			$.setColor( i );
			$.print( "The quick brown fox\n" );
		}


		// 6x8 font with a margin of 1
		$.setColor( 9 );
		$.setFont( marginFont );
		$.print( "The quick brown fox\n" );

		$.setColor( 10 );
		$.setFont( gnshFont );
		$.print( "The quick brown fox\n" );

		$.setColor( 11 );
		$.setFont( fontBlock );
		$.print( "ABCDFGHI" );


		// ============================================================
		// Screen 9: Print padding
		// ============================================================
		$.screen( "200x150", "screen9" );
		$.setFont( 1 );
		$.setColor( 15 );
		$.setPosPx( 5, 5 );
		$.print( "9: Print Padding" );
		$.print();

		$.setFont( 1 );
		$.print( "Font 1 with 0px padding" );
		$.setFont( 1, 1, 1 );
		$.print( "Font 1 with 1px padding" );
		$.setFont( 1, 3, 1 );
		$.print( "Font 1 with 3,1px" );
		
		$.print( "Font 2 with 0px padding" );
		$.setFont( 2 );
		$.setFont( 2, 2, 2 );
		$.print( "Font 2 with 2px padding" );

		$.setFont( gnshFont );
		$.setPos( 0, $.getPos().row );
		$.print( "Font with 0px padding" );
		$.setPos( 5, $.getPos().row );
		$.print( "Test", true );

		$.setFont( gnshFont, 3, 2 );
		$.setPos( 0, $.getPos().row + 2 );
		console.log( $.getPosPx() );
		$.print( "Font with 3,2px" );
		console.log( $.getPosPx() );
		$.setPos( 5, $.getPos().row );
		console.log( $.getPosPx() );
		$.print( "Test", true );
		console.log( $.getPosPx() );
		
	} );
</script>
</body>
</html>
