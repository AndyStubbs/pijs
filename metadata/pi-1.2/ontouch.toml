title = "ontouch"
category = "touch"
isScreen = true
summary = "Registers a callback function for touch events (start, end, or move) with optional hit box filtering."
description = """
Registers a callback function that will be called when a touch event occurs. The callback receives
an array of touch data objects, one for each active touch point, along with any optional custom
data passed when registering the handler.

Supports three event modes:
- "start": Triggered when a touch point starts (finger touches screen)
- "end": Triggered when a touch point ends (finger leaves screen)
- "move": Triggered when a touch point moves

If a hitBox is provided, the callback only fires when touches are within that rectangular area.
Otherwise, events fire regardless of touch position.

The callback function receives (touchDataArray, customData) where touchDataArray is an array of
touch data objects, one for each active touch point. Each touch data object contains x, y, id (touch
identifier), lastX, lastY, action, and type properties. The customData parameter is optional.
"""
example = """
$.screen( "300x200" );
$.print( "Touch to paint screen, touch end to stop." );
$.ontouch( "move", touchMove );
$.ontouch( "end", touchStop, true );

// Touch move function receives touchData and optional customData
function touchMove( touchData, customData ) {
	$.setPosPx( touchData[ 0 ].x, touchData[ 0 ].y );
	var pos = $.getPos();
	$.setPos( pos.col, pos.row );
	$.setColor( 8 );
	$.print( "+", true );
}

// touch stop function receives touchData and optional customData
function touchStop( touchData, customData ) {
	$.setColor( 14 );
	var pos = $.getPos();
	$.setPos( pos.col - 4, pos.row );
	$.print( "Stopped!", true );
	$.offtouch( "move", touchMove );
}
"""

[[parameters]]
name = "mode"
type = "string"
description = "Event mode: 'start', 'end', or 'move'."

[[parameters]]
name = "fn"
type = "function"
signature = "( touchDataArray: Array<TouchData>, customData?: object ) => void"
description = "Callback function called when the touch event occurs."

[[parameters]]
name = "once"
type = "boolean"
description = "If true, removes the handler after being called once."
optional = true

[[parameters]]
name = "hitBox"
type = "HitBox"
description = "Optional hit box object with x, y, width, height properties."
optional = true

[[parameters]]
name = "customData"
type = "any"
description = "Optional custom data passed to the callback function."
optional = true

[[returns]]
type = "void"
description = "This function does not return a value."
