title = "ongamepad"
category = "gamepad"
isScreen = false
summary = "Registers a callback function for gamepad events (buttons, axes, connect, disconnect)."
description = """
Registers a callback function that will be called when a gamepad event occurs. The callback data
varies depending on the event mode:

- "connect": Receives gamepad connection data
- "disconnect": Receives gamepad disconnection data
- "pressed", "touched", "pressReleased", "touchReleased": Receives button data object with index,
  pressed, touched, value, gamepadIndex properties
- "axis" (specific index): Receives axis value as a number
- "axis" (any/all): Receives array of axis change objects with index, value, lastValue properties

You can listen for specific buttons/axes by index, use "any" to listen for any button/axis, or use
an array to listen for multiple specific buttons. The customData parameter is optional.
"""
example = """
$.screen( "300x300" );\r
$.print( "Press button 3 to stop" );\r
$.ongamepad( 0, "pressed", "any", pressButton );\r
$.ongamepad( 0, "pressed", 3, stop );\r
\r
// Press button function receives button data and optional customData\r
function pressButton( btn, customData ) {\r
\t$.print( "Button " + btn.index + " pressed" );\r
}\r
\r
// Stop function receives event data and optional customData\r
function stop( data, customData ) {\r
\t$.offgamepad( 0, "pressed", "any", pressButton );\r
\t$.offgamepad( 0, "pressed", 3, stop );\r
\t$.print( "Stopped" );\r
}\r
"""

[[parameters]]
name = "gamepadIndex"
type = "number"
description = "Gamepad index (0-3)."

[[parameters]]
name = "mode"
type = "string"
description = "Event mode: 'connect', 'disconnect', 'axis', 'pressed', 'touched', 'pressReleased', or 'touchReleased'."

[[parameters]]
name = "item"
type = "number | string | array"
typeDesc = "*Many"
description = "Button or axis index, array of indices, 'any', or null for all axes."

[[parameters]]
name = "fn"
type = "function"
signature = "( data: any, customData?: object ) => void"
description = "Callback function called when the gamepad event occurs."

[[parameters]]
name = "once"
type = "boolean"
description = "If true, removes the handler after being called once."
optional = true

[[parameters]]
name = "customData"
type = "any"
description = "Optional custom data passed to the callback function."
optional = true

[[returns]]
type = "void"
description = "This function does not return a value."
