title = "onmouse"
category = "mouse"
isScreen = true
summary = "Registers a callback function for mouse events (down, up, or move) with optional hit box filtering."
description = """
Registers a callback function that will be called when a mouse event occurs. The callback receives
mouse data including position coordinates, button state, and action type, along with any optional
custom data passed when registering the handler.

Supports three event modes:
- "down": Triggered when a mouse button is pressed down
- "up": Triggered when a mouse button is released
- "move": Triggered when the mouse cursor moves

If a hitBox is provided, the callback only fires when the mouse is within that rectangular area.
Otherwise, events fire regardless of mouse position.

The callback function receives (mouseData, customData) where mouseData contains x, y, buttons, action,
type, lastX, and lastY properties. The customData parameter is optional.
"""

[[parameters]]
name = "mode"
type = "string"
description = "Event mode: 'down', 'up', or 'move'."

[[parameters]]
name = "fn"
type = "function"
signature = "( mouseData: { x: number, y: number, lastX: number, lastY: number, buttons: number, action: string, type: string }, customData?: object ) => void"
description = "Callback function called when the mouse event occurs."

[[parameters]]
name = "once"
type = "boolean"
description = "If true, removes the handler after being called once."
optional = true

[[parameters]]
name = "hitBox"
type = "HitBox"
description = "Optional hit box object with x, y, width, height properties."
optional = true

[[parameters]]
name = "customData"
type = "any"
description = "Optional custom data passed to the callback function."
optional = true

[[returns]]
type = "void"
description = "This function does not return a value."

example = """
$.screen( "300x200" );\r
$.print( "Move mouse to paint screen, click to stop." );\r
$.onmouse( "move", mouseMove );\r
$.onmouse( "up", mouseStop, true );\r
\r
// Mouse move function receives mouseData and optional customData\r
function mouseMove( mouseData, customData ) {\r
\t$.setPosPx( mouseData.x, mouseData.y );\r
\tvar pos = $.getPos();\r
\t$.setPos( pos.col, pos.row );\r
\t$.setColor( 8 );\r
\t$.print( "+", true );\r
}\r
\r
// Mouse stop function receives mouseData and optional customData\r
function mouseStop( mouseData, customData ) {\r
\t$.setColor( 14 );\r
\tvar pos = $.getPos();\r
\t$.setPos( pos.col - 4, pos.row );\r
\t$.print( "Stopped!", true );\r
\t$.offmouse( "move", mouseMove );\r
}\r
"""