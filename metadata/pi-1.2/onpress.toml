title = "onpress"
category = "touch,mouse"
isScreen = true
summary = "Registers a callback function for press events (mouse or touch) with optional hit box filtering."
description = """
Registers a callback function that will be called when a press event occurs. Press events unify
mouse and touch input, allowing the same handler to work with both input types. The callback
receives press data including position coordinates, button state, and action type, along with
any optional custom data passed when registering the handler.

Supports three event modes:
- "down": Triggered when a mouse button is pressed down or touch starts
- "up": Triggered when a mouse button is released or touch ends
- "move": Triggered when the mouse cursor moves or touch moves

If a hitBox is provided, the callback only fires when the press is within that rectangular area.
Otherwise, events fire regardless of position.

The callback function receives (pressData, customData) where pressData contains x, y, buttons,
action, type, lastX, and lastY properties. The type will be either "mouse" or "touch" depending
on the input source. The customData parameter is optional.
"""
example = """
$.screen( "300x200" );\r
$.print( \r
\t"Move mouse or touch to paint screen," +\r
\t" click/touch up to stop."\r
);\r
$.onpress( "move", pressMove );\r
$.onpress( "up", pressStop, true );\r
\r
// Press move function receives pressData and optional customData\r
function pressMove( pressData, customData ) {\r
\t$.setPosPx( pressData.x, pressData.y );\r
\tvar pos = $.getPos();\r
\t$.setPos( pos.col, pos.row );\r
\t$.setColor( 8 );\r
\t$.print( "+", true );\r
}\r
\r
// Press stop function receives pressData and optional customData\r
function pressStop( pressData, customData ) {\r
\t$.setColor( 14 );\r
\tvar pos = $.getPos();\r
\t$.setPos( pos.col - 4, pos.row );\r
\t$.print( "Stopped!", true );\r
\t$.offpress( "move", pressMove );\r
}\r
"""

[[parameters]]
name = "mode"
type = "string"
description = "Event mode: 'down', 'up', or 'move'."

[[parameters]]
name = "fn"
type = "function"
signature = "( pressData: { x: number, y: number, lastX: number, lastY: number, buttons: number, action: string, type: string }, customData?: object ) => void"
description = "Callback function called when the press event occurs."

[[parameters]]
name = "once"
type = "boolean"
description = "If true, removes the handler after being called once."
optional = true

[[parameters]]
name = "hitBox"
type = "HitBox"
description = "Optional hit box object with x, y, width, height properties."
optional = true

[[parameters]]
name = "customData"
type = "any"
description = "Optional custom data passed to the callback function."
optional = true

[[returns]]
type = "void"
description = "This function does not return a value."
