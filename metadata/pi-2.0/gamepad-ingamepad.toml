title = "ingamepad"
category = "gamepad"
isScreen = false
plugin = "gamepad"
summary = "Gets gamepad data for a specific gamepad or all gamepads."
description = """
Retrieves gamepad data. If gamepadIndex is provided, returns the gamepad object for that index,
or undefined if not found. If gamepadIndex is null or undefined, returns an array of all
connected gamepads sorted by index.

The returned gamepad object contains:
- **index**: Gamepad index
- **id**: Gamepad identifier string
- **connected**: Connection status
- **mapping**: Gamepad mapping type
- **buttons**: Array of button objects with pressed, value, pressStarted, pressReleased
- **axes**: Array of axis values (-1.0 to 1.0)
- **getButton(buttonIndex)**: Get button object by index
- **getButtonPressed(buttonIndex)**: Get button pressed state
- **getButtonJustPressed(buttonIndex)**: Get if button was just pressed this frame
- **getButtonJustReleased(buttonIndex)**: Get if button was just released this frame
- **getAxis(axisIndex)**: Get axis value
- **getAxisChanged(axisIndex)**: Get if axis value changed this frame
"""
example = """
$.screen( "300x200" );
let x = 150;
let y = 100;
let lt = 0;
requestAnimationFrame( run );
function run( t ) {
	let gamepads = $.ingamepad();
	let factor = ( t - lt ) * 0.5;
	lt = t;
	$.cls();
	if( gamepads.length > 0 ) {
		x = Math.min( Math.max( x + gamepads[ 0 ].axes[ 0 ] * factor, 0 ), 299 );
		y = Math.min( Math.max( y + gamepads[ 0 ].axes[ 1 ] * factor, 0 ), 199 );
		if( gamepads[ 0 ].getButtonPressed( 0 ) ) {
			$.setColor( 2 );
		} else {
			$.setColor( 15 );
		}
		$.circle( Math.floor( x ), Math.floor( y ) , 9 );
		$.pset( Math.floor( x ), Math.floor( y ) );
	}
	requestAnimationFrame( run );
}
"""

[[parameters]]
name = "gamepadIndex"
type = "number"
description = "Gamepad index to retrieve. If null/undefined, returns all gamepads."
optional = true

[[returns]]
type = "object | array"
typeDesc = "*Many"
description = "Gamepad object if index provided, or array of all gamepads if index is null/undefined."
